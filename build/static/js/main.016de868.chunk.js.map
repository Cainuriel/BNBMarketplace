{"version":3,"sources":["components/Content/MintNFT/MintForm.js","store/web3-context.js","store/collection-context.js","store/Web3Provider.js","store/CollectionProvider.js","store/marketplace-context.js","store/MarketplaceProvider.js","connection/web3.js","helpers/utils.js","components/Layout/Navbar.js","components/Content/NFTCollection/NFTCollection.js","img/bnb.png","components/Layout/Spinner.js","img/malanftdriners.png","components/icons/MoneyCheckDollarIcon.js","components/icons/AddressCardIcon.js","components/icons/WalletIcon.js","components/Content/Main.js","App.js","index.js"],"names":["require","create","host","port","protocol","MintForm","useState","useContext","Web3Context","CollectionContext","className","React","createContext","account","networkId","loadAccount","loadNetworkId","contract","totalSupply","collection","nftIsLoading","loadContract","loadTotalSupply","loadCollection","updateTotalSupply","updateCollection","updateOwner","setNftIsLoading","defaultWeb3State","web3Reducer","state","action","type","Web3Provider","props","useReducer","web3State","dispatchWeb3Action","loadAccountHandler","web3","a","eth","getAccounts","accounts","loadNetworkIdHandler","net","getId","web3Context","Provider","value","children","defaultCollectionState","collectionReducer","findIndex","NFT","id","parseInt","index","owner","newOwner","loading","CollectionProvider","CollectionState","dispatchCollectionAction","loadTotalSupplyHandler","methods","call","loadCollectionHandler","i","tokenURI","hash","fetch","response","ok","Error","json","metadata","ownerOf","title","properties","name","description","rarity","filetype","img","image","video","console","error","updateCollectionHandler","collectionContext","NFTCollection","deployedNetwork","Contract","abi","address","MarketplaceContext","offerCount","offers","userFunds","mktIsLoading","loadOfferCount","loadOffers","updateOffer","addOffer","loadUserFunds","setMktIsLoading","defaultMarketplaceState","marketplaceReducer","filter","offer","offerId","user","price","fulfilled","cancelled","MarketplaceProvider","MarketplaceState","dispatchMarketplaceAction","loadOfferCountHandler","loadOffersHandler","push","map","loadUserFundsHandler","marketplaceContext","NFTMarketplace","window","ethereum","Web3","DECIMALS","formatPrice","Math","round","Navbar","etherscanUrl","fundsLoading","setFundsLoading","web3Ctx","marketplaceCtx","connectWalletHandler","request","method","events","ClaimFunds","on","event","log","onClick","claimFunds","send","from","receipt","alert","role","href","target","rel","substr","length","nftURL","nft","showImages","filterType","collectionCtx","priceRefs","useRef","current","Array","fill","_","createRef","filteredNFTS","key","buyHandler","buyIndex","fillOffer","OfferFilled","returnValues","cancelHandler","cancelIndex","cancelOffer","OfferCancelled","toFixed","src","alt","width","autoPlay","loop","muted","height","onSubmit","e","preventDefault","enteredPrice","utils","toWei","approve","options","makeOffer","Offer","makeOfferHandler","step","placeholder","ref","Spinner","MoneyCheckDollarIcon","xmlns","viewBox","color","d","AddressCardIcon","WalletIcon","filterOptions","label","Icon","Main","collectionLoaded","selectedFilter","setSelectedFilter","logo","ButtonGroup","idx","Button","variant","App","showInstallNetwork","setshowInstallNetwork","useEffect","loadBlockchainData","nftDeployedNetwork","networks","nftContract","mktDeployedNetwork","mktContract","Transfer","tokenId","to","chainId","location","reload","changeOrInstalingNetwork","networkData","chainName","rpcUrls","nativeCurrency","symbol","decimals","blockExplorerUrls","params","showNavbar","showContent","Fragment","ReactDOM","render","document","getElementById"],"mappings":"ulr7BAKmBA,EAAQ,KACHC,OAAO,CAAEC,KAAM,iBAAkBC,KAAM,KAAMC,SAAU,UA0LhEC,IAxLE,WACf,MAAsCC,mBAAS,IAA/C,mBACA,GADA,UACoDA,oBAAS,IAA7D,mBAEA,GAFA,UAEoDA,mBAAS,KAA7D,mBACA,GADA,UACsCA,oBAAS,IAA/C,mBAEA,GAFA,UAE0CA,mBAAS,KAAnD,mBACA,GADA,UAC0CA,oBAAS,IAAnD,mBAEA,GAFA,UAE8CA,mBAAS,WAAvD,mBACA,GADA,UAC8CA,oBAAS,IAAvD,mBAEA,GAFA,UAEoDA,mBAAS,OAA7D,mBACA,GADA,UACsCA,oBAAS,IAA/C,6BAEgBC,qBAAWC,KACLD,qBAAWE,KAiHjC,OAgDE,aA/CA,CA+CA,qBACE,oBAAIC,UAAU,cAAd,qE,gQC3LN,WAEMF,EAFN,OAEoBG,EAAMC,cAAc,CACtCC,QAAS,KACTC,UAAW,KACXC,YAAa,aACbC,cAAe,eAGFR,O,gCCTf,WAEMC,EAFN,OAE0BE,EAAMC,cAAc,CAC5CK,SAAU,KACVC,YAAa,KACbC,WAAY,GACZC,cAAc,EACdC,aAAc,aACdC,gBAAiB,aACjBC,eAAgB,aAChBC,kBAAmB,aACnBC,iBAAkB,aAClBC,YAAa,aACbC,gBAAiB,eAGJlB,O,0TCZTmB,EAAmB,CACvBf,QAAS,KACTC,UAAW,MAGPe,EAAc,SAACC,EAAOC,GAC1B,MAAmB,YAAhBA,EAAOC,KACD,CACLnB,QAASkB,EAAOlB,QAChBC,UAAWgB,EAAMhB,WAIF,cAAhBiB,EAAOC,KACD,CACLnB,QAASiB,EAAMjB,QACfC,UAAWiB,EAAOjB,WAIfc,GAiCMK,EA9BM,SAAAC,GACnB,MAAwCC,qBAAWN,EAAaD,GAAhE,mBAAOQ,EAAP,KAAkBC,EAAlB,KAEMC,EAAkB,uCAAG,WAAMC,GAAN,iBAAAC,EAAA,sEACFD,EAAKE,IAAIC,cADP,cACnBC,EADmB,OAEnB9B,EAAU8B,EAAS,GACzBN,EAAmB,CAACL,KAAM,UAAWnB,QAASA,IAHrB,kBAIlBA,GAJkB,2CAAH,sDAOlB+B,EAAoB,uCAAG,WAAML,GAAN,eAAAC,EAAA,sEACHD,EAAKE,IAAII,IAAIC,QADV,cACrBhC,EADqB,OAE3BuB,EAAmB,CAACL,KAAM,YAAalB,UAAWA,IAFvB,kBAGpBA,GAHoB,2CAAH,sDAMpBiC,EAAc,CAClBlC,QAAQuB,EAAUvB,QAClBC,UAAWsB,EAAUtB,UACrBC,YAAauB,EACbtB,cAAe4B,GAGjB,OACE,cAAC,IAAYI,SAAb,CAAsBC,MAAOF,EAA7B,SACGb,EAAMgB,Y,gBChDPC,EAAyB,CAC7BlC,SAAU,KACVC,YAAa,KACbC,WAAY,GACZC,cAAc,GAGVgC,EAAoB,SAACtB,EAAOC,GAChC,GAAmB,aAAhBA,EAAOC,KACR,MAAO,CACLf,SAAUc,EAAOd,SACjBC,YAAaY,EAAMZ,YACnBC,WAAYW,EAAMX,WAClBC,aAAcU,EAAMV,cAIxB,GAAmB,eAAhBW,EAAOC,KACR,MAAO,CACLf,SAAUa,EAAMb,SAChBC,YAAaa,EAAOb,YACpBC,WAAYW,EAAMX,WAClBC,aAAcU,EAAMV,cAIxB,GAAmB,mBAAhBW,EAAOC,KACR,MAAO,CACLf,SAAUa,EAAMb,SAChBC,YAAaY,EAAMZ,YACnBC,WAAYY,EAAOZ,WACnBC,aAAcU,EAAMV,cAIxB,GAAmB,qBAAhBW,EAAOC,KAA6B,CACrC,IACIb,EAAa,GAQjB,OALEA,GADY,IAHAW,EAAMX,WAAWkC,WAAU,SAAAC,GAAG,OAAIA,EAAIC,KAAOC,SAASzB,EAAOuB,IAAIC,OAInE,CAAIxB,EAAOuB,KAAX,mBAAmBxB,EAAMX,aAEzB,YAAOW,EAAMX,YAGlB,CACLF,SAAUa,EAAMb,SAChBC,YAAaY,EAAMZ,YACnBC,WAAYA,EACZC,aAAcU,EAAMV,cAIxB,GAAmB,gBAAhBW,EAAOC,KAAwB,CAChC,IAAMyB,EAAQ3B,EAAMX,WAAWkC,WAAU,SAAAC,GAAG,OAAIA,EAAIC,KAAOC,SAASzB,EAAOwB,OACvEpC,EAAU,YAAOW,EAAMX,YAG3B,OAFAA,EAAWsC,GAAOC,MAAQ3B,EAAO4B,SAE1B,CACL1C,SAAUa,EAAMb,SAChBC,YAAaY,EAAMZ,YACnBC,WAAYA,EACZC,aAAcU,EAAMV,cAIxB,MAAmB,YAAhBW,EAAOC,KACD,CACLf,SAAUa,EAAMb,SAChBC,YAAaY,EAAMZ,YACnBC,WAAYW,EAAMX,WAClBC,aAAcW,EAAO6B,SAIlBT,GA4GMU,EAzGY,SAAA3B,GACzB,MAAoDC,qBAAWiB,EAAmBD,GAAlF,mBAAOW,EAAP,KAAwBC,EAAxB,KAQMC,EAAsB,uCAAG,WAAM/C,GAAN,eAAAuB,EAAA,sEACHvB,EAASgD,QAAQ/C,cAAcgD,OAD5B,cACvBhD,EADuB,OAE7B6C,EAAyB,CAAC/B,KAAM,aAAcd,YAAaA,IAF9B,kBAGtBA,GAHsB,2CAAH,sDAMtBiD,EAAqB,uCAAG,WAAMlD,EAAUC,GAAhB,yBAAAsB,EAAA,sDACxBrB,EAAa,GACTiD,EAAIZ,SAAStC,GAFO,YAEOkD,GAAK,GAFZ,iCAGPnD,EAASgD,QAAQI,SAASD,GAAGF,OAHtB,cAGpBI,EAHoB,yBAKDC,MAAM,gCAAD,OACMD,EADN,WALJ,WAKlBE,EALkB,QAQXC,GARW,uBAShB,IAAIC,MAAM,wBATM,yBAYDF,EAASG,OAZR,eAYlBC,EAZkB,iBAaJ3D,EAASgD,QAAQY,QAAQT,GAAGF,OAbxB,QAalBR,EAbkB,OAexBvC,EAAU,sBAAOA,GAAP,CAAmB,CAC3BoC,GAAIa,EACJU,MAAOF,EAASG,WAAWC,KAAKC,YAChCA,YAAaL,EAASG,WAAWE,YAAYA,YAC7CC,OAAQN,EAASG,WAAWG,OAAOD,YACnCE,SAAUP,EAASG,WAAWI,SAASF,YACvCG,IAAKR,EAASG,WAAWM,MAAMJ,YAC/BK,MAAOV,EAASG,WAAWO,MAAML,YACjCvB,MAAOA,KAETK,EAAyB,CAAC/B,KAAM,iBAAkBb,WAAYA,IAzBtC,kDA2BxBoE,QAAQC,MAAM,wBA3BU,QAEepB,IAFf,yEAAH,wDAiCrBqB,EAAuB,uCAAG,WAAMxE,EAAUsC,EAAIG,GAApB,qBAAAlB,EAAA,sEAEXvB,EAASgD,QAAQI,SAASd,GAAIW,OAFnB,cAExBI,EAFwB,yBAKLC,MAAM,gCAAD,OACMD,EADN,WALA,WAKtBE,EALsB,QAQfC,GARe,sBASpB,IAAIC,MAAM,wBATU,wBAWLF,EAASG,OAXJ,QAWtBC,EAXsB,OAa5BtB,EAAM,CACJC,GAAIC,SAASD,GACbuB,MAAOF,EAASG,WAAWC,KAAKC,YAChCA,YAAaL,EAASG,WAAWE,YAAYA,YAC7CC,OAAQN,EAASG,WAAWG,OAAOD,YACnCE,SAAUP,EAASG,WAAWI,SAASF,YACvCG,IAAKR,EAASG,WAAWM,MAAMJ,YAC/BK,MAAOV,EAASG,WAAWO,MAAML,YACjCvB,MAAOA,GArBmB,kDAwB5B6B,QAAQC,MAAM,wBAxBc,QA0B9BzB,EAAyB,CAAC/B,KAAM,mBAAoBsB,IAAKA,IA1B3B,0DAAH,0DAqCvBoC,EAAoB,CACxBzE,SAAU6C,EAAgB7C,SAC1BC,YAAa4C,EAAgB5C,YAC7BC,WAAY2C,EAAgB3C,WAC5BC,aAAa0C,EAAgB1C,aAC7BC,aAvF0B,SAACkB,EAAMoD,EAAeC,GAChD,IAAM3E,EAAW2E,EAAkB,IAAIrD,EAAKE,IAAIoD,SAASF,EAAcG,IAAKF,EAAgBG,SAAU,GAEtG,OADAhC,EAAyB,CAAC/B,KAAM,WAAYf,SAAUA,IAC/CA,GAqFPK,gBAAiB0C,EACjBzC,eAAgB4C,EAChB1C,iBAAkBgE,EAClB/D,YAjByB,SAAC6B,EAAII,GAC9BI,EAAyB,CAAC/B,KAAM,cAAeuB,GAAIA,EAAII,SAAUA,KAiBjEhC,gBAd6B,SAACiC,GAC9BG,EAAyB,CAAC/B,KAAM,UAAW4B,QAASA,MAgBtD,OACE,cAAC,IAAkBZ,SAAnB,CAA4BC,MAAOyC,EAAnC,SACGxD,EAAMgB,YCrKE8C,EAfYrF,IAAMC,cAAc,CAC7CK,SAAU,KACVgF,WAAY,KACZC,OAAQ,GACRC,UAAW,KACXC,cAAc,EACd/E,aAAc,aACdgF,eAAgB,aAChBC,WAAY,aACZC,YAAa,aACbC,SAAU,aACVC,cAAe,aACfC,gBAAiB,eCVbC,EAA0B,CAC9B1F,SAAU,KACVgF,WAAY,KACZC,OAAQ,GACRC,UAAW,KACXC,cAAc,GAGVQ,EAAqB,SAAC9E,EAAOC,GACjC,GAAmB,aAAhBA,EAAOC,KACR,MAAO,CACLf,SAAUc,EAAOd,SACjBgF,WAAYnE,EAAMmE,WAClBC,OAAQpE,EAAMoE,OACdC,UAAWrE,EAAMqE,UACjBC,aAActE,EAAMsE,cAIxB,GAAmB,mBAAhBrE,EAAOC,KACR,MAAO,CACLf,SAAUa,EAAMb,SAChBgF,WAAYlE,EAAOkE,WACnBC,OAAQpE,EAAMoE,OACdC,UAAWrE,EAAMqE,UACjBC,aAActE,EAAMsE,cAIxB,GAAmB,eAAhBrE,EAAOC,KACR,MAAO,CACLf,SAAUa,EAAMb,SAChBgF,WAAYnE,EAAMmE,WAClBC,OAAQnE,EAAOmE,OACfC,UAAWrE,EAAMqE,UACjBC,aAActE,EAAMsE,cAIxB,GAAmB,gBAAhBrE,EAAOC,KAAwB,CAChC,IAAMkE,EAASpE,EAAMoE,OAAOW,QAAO,SAAAC,GAAK,OAAIA,EAAMC,UAAYvD,SAASzB,EAAOgF,YAE9E,MAAO,CACL9F,SAAUa,EAAMb,SAChBgF,WAAYnE,EAAMmE,WAClBC,OAAQA,EACRC,UAAWrE,EAAMqE,UACjBC,aAActE,EAAMsE,cAIxB,GAAmB,aAAhBrE,EAAOC,KAAqB,CAC7B,IACIkE,EAAS,GAeb,OAZEA,GADY,IAHApE,EAAMoE,OAAO7C,WAAU,SAAAyD,GAAK,OAAIA,EAAMC,UAAYvD,SAASzB,EAAO+E,MAAMC,YAI9E,sBAAOjF,EAAMoE,QAAb,CAAqB,CACzBa,QAASvD,SAASzB,EAAO+E,MAAMC,SAC/BxD,GAAIC,SAASzB,EAAO+E,MAAMvD,IAC1ByD,KAAOjF,EAAO+E,MAAME,KACpBC,MAAOzD,SAASzB,EAAO+E,MAAMG,OAC7BC,WAAW,EACXC,WAAW,KAGP,YAAOrF,EAAMoE,QAGd,CACLjF,SAAUa,EAAMb,SAChBgF,WAAYnE,EAAMmE,WAClBC,OAAQA,EACRC,UAAWrE,EAAMqE,UACjBC,aAActE,EAAMsE,cAIxB,MAAmB,cAAhBrE,EAAOC,KACD,CACLf,SAAUa,EAAMb,SAChBgF,WAAYnE,EAAMmE,WAClBC,OAAQpE,EAAMoE,OACdC,UAAWpE,EAAOoE,UAClBC,aAActE,EAAMsE,cAIL,YAAhBrE,EAAOC,KACD,CACLf,SAAUa,EAAMb,SAChBgF,WAAYnE,EAAMmE,WAClBC,OAAQpE,EAAMoE,OACdC,UAAWrE,EAAMqE,UACjBC,aAAcrE,EAAO6B,SAIlB+C,GA2EMS,EAxEa,SAAAlF,GAC1B,MAAsDC,qBAAWyE,EAAoBD,GAArF,mBAAOU,EAAP,KAAyBC,EAAzB,KAQMC,EAAqB,uCAAG,WAAMtG,GAAN,eAAAuB,EAAA,sEACHvB,EAASgD,QAAQgC,aAAa/B,OAD3B,cACtB+B,EADsB,OAE5BqB,EAA0B,CAACtF,KAAM,iBAAkBiE,WAAYA,IAFnC,kBAGrBA,GAHqB,2CAAH,sDAMrBuB,EAAiB,uCAAG,WAAMvG,EAAUgF,GAAhB,mBAAAzD,EAAA,sDACpB0D,EAAS,GACL9B,EAAI,EAFY,YAETA,EAAI6B,GAFK,iCAGFhF,EAASgD,QAAQiC,OAAO9B,EAAI,GAAGF,OAH7B,OAGhB4C,EAHgB,OAItBZ,EAAOuB,KAAKX,GAJU,OAEO1C,IAFP,uBAMxB8B,EAASA,EACRwB,KAAI,SAAAZ,GAIH,OAHAA,EAAMC,QAAUvD,SAASsD,EAAMC,SAC/BD,EAAMvD,GAAKC,SAASsD,EAAMvD,IAC1BuD,EAAMG,MAAQzD,SAASsD,EAAMG,OACtBH,KAERD,QAAO,SAAAC,GAAK,OAAwB,IAApBA,EAAMI,YAA2C,IAApBJ,EAAMK,aACpDG,EAA0B,CAACtF,KAAM,aAAckE,OAAQA,IAd/B,4CAAH,wDAyBjByB,EAAoB,uCAAG,WAAM1G,EAAUJ,GAAhB,eAAA2B,EAAA,sEACHvB,EAASgD,QAAQkC,UAAUtF,GAASqD,OADjC,cACrBiC,EADqB,OAE3BmB,EAA0B,CAACtF,KAAM,YAAamE,UAAWA,IAF9B,kBAGpBA,GAHoB,2CAAH,wDAUpByB,EAAqB,CACzB3G,SAAUoG,EAAiBpG,SAC3BgF,WAAYoB,EAAiBpB,WAC7BC,OAAQmB,EAAiBnB,OACzBC,UAAWkB,EAAiBlB,UAC5BC,aAAciB,EAAiBjB,aAC/B/E,aArD0B,SAACkB,EAAMsF,EAAgBjC,GACjD,IAAM3E,EAAW2E,EAAkB,IAAIrD,EAAKE,IAAIoD,SAASgC,EAAe/B,IAAKF,EAAgBG,SAAU,GAEvG,OADAuB,EAA0B,CAACtF,KAAM,WAAYf,SAAUA,IAChDA,GAmDPoF,eAAgBkB,EAChBjB,WAAYkB,EACZjB,YA3ByB,SAACQ,GAC1BO,EAA0B,CAACtF,KAAM,cAAe+E,QAASA,KA2BzDP,SAxBsB,SAACM,GACvBQ,EAA0B,CAACtF,KAAM,WAAY8E,MAAOA,KAwBpDL,cAAekB,EACfjB,gBAhB6B,SAAC9C,GAC9B0D,EAA0B,CAACtF,KAAM,UAAW4B,QAASA,MAkBvD,OACE,cAAC,EAAmBZ,SAApB,CAA6BC,MAAO2E,EAApC,SACG1F,EAAMgB,Y,kBCtKEX,EAFFuF,OAAOC,SAAW,IAAIC,IAAKF,OAAOC,UAAY,KCH9CE,G,OAAQ,SAAI,GAAI,KAIhBC,EAAc,SAACjB,GAM1B,OAHAA,EAAcA,EALkBgB,EAMhChB,EAAQkB,KAAKC,MAHK,IAGCnB,GAHD,KC0HLoB,EAxHA,WACb,IA2CIC,EA3CJ,EAAwChI,oBAAS,GAAjD,mBAAOiI,EAAP,KAAqBC,EAArB,KAEMC,EAAUlI,qBAAWC,KACrBkI,EAAiBnI,qBAAWyF,GAE5B2C,EAAoB,uCAAG,sBAAAnG,EAAA,+EAGnBsF,OAAOC,SAASa,QAAQ,CAAEC,OAAQ,wBAHf,sDAKzBtD,QAAQC,MAAR,MALyB,OAS3BiD,EAAQ1H,YAAYwB,GATO,wDAAH,qDAkD1B,OArBAmG,EAAezH,SAAS6H,OAAOC,aAC9BC,GAAG,QAAQ,SAACC,GACXP,EAAejC,cAAciC,EAAezH,SAAUwH,EAAQ5H,SAC9D2H,GAAgB,MAEjBQ,GAAG,SAAS,SAACxD,GACZD,QAAQ2D,IAAI1D,MAMZ8C,EADuB,IAAtBG,EAAQ3H,UACM,+BACe,IAAtB2H,EAAQ3H,UACD,+BACe,IAAtB2H,EAAQ3H,UACD,8BAEA,+BAIjB,qBAAKJ,UAAU,6BAAf,SACE,sBAAKA,UAAU,kBAAf,UACK+H,EAAQ5H,SACT,qBAAKH,UAAU,eAAf,SACE,oBAAIA,UAAU,aAAd,4CAEDgI,EAAevC,UAAY,GAC1B,sBAAKzF,UAAU,iBAAf,WACI6H,GACA,wBACEvG,KAAK,SACLtB,UAAU,iDACVyI,QAnDY,WACxBT,EAAezH,SAASgD,QAAQmF,aAAaC,KAAK,CAAEC,KAAMb,EAAQ5H,UACjEmI,GAAG,mBAAmB,SAAC1E,GACtBkE,GAAgB,MAEjBQ,GAAG,WAAW,SAACO,GACdb,EAAejC,cAAciC,EAAezH,SAAUwH,EAAQ5H,SAC9D2H,GAAgB,MAEjBQ,GAAG,SAAS,SAACxD,GACZsC,OAAO0B,MAAM,uDACbhB,GAAgB,OAqCR,qCAKwBN,EAAYQ,EAAevC,WALnD,UAODoC,GACC,qBAAK7H,UAAU,0CAAf,SACE,qBAAKA,UAAU,iBAAiB+I,KAAK,SAArC,SACE,sBAAM/I,UAAU,mBAK1B,qBAAKA,UAAU,iBAAf,SACG+H,EAAQ5H,SACP,mBACEH,UAAU,iBACVgJ,KAAK,8BACLC,OAAO,QACPC,IAAI,sBAJN,SAKA,wBACE5H,KAAK,SACLtB,UAAU,6BAFZ,gCAQJ,sBAAKA,UAAU,iBAAf,UACG+H,EAAQ5H,SACP,oBACEH,UAAU,iBACVgJ,KAAI,UAAKpB,EAAL,oBAA6BG,EAAQ5H,SACzC8I,OAAO,QACPC,IAAI,sBAJN,wBAKMnB,EAAQ5H,QAAQgJ,OAAO,EAAE,GAL/B,cAKuCpB,EAAQ5H,QAAQgJ,OAAOpB,EAAQ5H,QAAQiJ,OAAS,QAEvFrB,EAAQ5H,SACR,wBACEmB,KAAK,SACLtB,UAAU,0BACVyI,QAASR,EAHX,0C,SCxGNoB,EAAS,SAACC,GAAD,6CAAyCA,EAAI5E,MA6J7CO,EA3JO,SAAC,GAA+C,IAAD,IAA5CsE,kBAA4C,aAAzBC,kBAAyB,MAAZ,MAAY,EAC7DzB,EAAUlI,qBAAWC,KACrB2J,EAAgB5J,qBAAWE,KAC3BiI,EAAiBnI,qBAAWyF,GAE5BoE,EAAYC,iBAAO,IACrBD,EAAUE,QAAQR,SAAWK,EAAchJ,WAAW2I,SACxDM,EAAUE,QAAUC,MAAMJ,EAAchJ,WAAW2I,QAAQU,OAAO9C,KAAI,SAAC+C,EAAGrG,GAAJ,OAAUgG,EAAUE,QAAQlG,IAAMsG,0BAG1G,IAAMC,EAAeR,EAAchJ,WAAWuG,KAAI,SAACpE,EAAKsH,GACtD,MAAO,CAAEA,MAAKtH,UACbuD,QAAO,YAAkB,EAAf+D,IAAgB,IAAXtH,EAAU,EAAVA,IAChB,GAAmB,aAAf4G,EAEF,OAAkB,KADJxB,EAAexC,OAASwC,EAAexC,OAAO7C,WAAU,SAAAyD,GAAK,OAAIA,EAAMvD,KAAOD,EAAIC,OAAO,GAGzG,GAAmB,YAAf2G,EAA0B,CAC5B,IAAMzG,EAAQiF,EAAexC,OAASwC,EAAexC,OAAO7C,WAAU,SAAAyD,GAAK,OAAIA,EAAMvD,KAAOD,EAAIC,OAAO,EAEvG,QADyB,IAAXE,EAAeH,EAAII,MAAQgF,EAAexC,OAAOzC,GAAOuD,QACrDyB,EAAQ5H,QAE3B,OAAO,KAyBHgK,EAAa,SAAC5B,GAClB,IAAM6B,EAAWtH,SAASyF,EAAMU,OAAO1G,OACvCyF,EAAezH,SAASgD,QAAQ8G,UAAUrC,EAAexC,OAAO4E,GAAU/D,SAASsC,KAAK,CAAEC,KAAMb,EAAQ5H,QAASoC,MAAOyF,EAAexC,OAAO4E,GAAU7D,QACvJ+B,GAAG,mBAAmB,SAAC1E,GACtBoE,EAAehC,iBAAgB,MAEhCsC,GAAG,WAAW,SAACO,GACd,IAAMzC,EAAQyC,EAAQT,OAAOkC,YAAYC,aACzCvC,EAAenC,YAAYO,EAAMC,SACjCoD,EAAczI,YAAYoF,EAAMvD,GAAIuD,EAAMnD,UAC1C+E,EAAehC,iBAAgB,MAEhCsC,GAAG,SAAS,SAACxD,GACZsC,OAAO0B,MAAM,uDACbd,EAAehC,iBAAgB,OAI7BwE,EAAgB,SAACjC,GACrB,IAAMkC,EAAc3H,SAASyF,EAAMU,OAAO1G,OAC1CyF,EAAezH,SAASgD,QAAQmH,YAAY1C,EAAexC,OAAOiF,GAAapE,SAASsC,KAAK,CAAEC,KAAMb,EAAQ5H,UAC5GmI,GAAG,mBAAmB,SAAC1E,GACtBoE,EAAehC,iBAAgB,MAEhCsC,GAAG,WAAW,SAACO,GACd,IAAMzC,EAAQyC,EAAQT,OAAOuC,eAAeJ,aAC5CvC,EAAenC,YAAYO,EAAMC,SACjCoD,EAAczI,YAAYoF,EAAMvD,GAAIuD,EAAMpD,OAC1CgF,EAAehC,iBAAgB,MAEhCsC,GAAG,SAAS,SAACxD,GACZsC,OAAO0B,MAAM,uDACbd,EAAehC,iBAAgB,OAInC,OACE,qBAAKhG,UAAU,kBAAf,SAEGiK,EAAajD,KAAI,YAAiB,IAAfpE,EAAc,EAAdA,IAAKsH,EAAS,EAATA,IACjBnH,EAAQiF,EAAexC,OAASwC,EAAexC,OAAO7C,WAAU,SAAAyD,GAAK,OAAIA,EAAMvD,KAAOD,EAAIC,OAAO,EACjGG,GAAmB,IAAXD,EAAeH,EAAII,MAAQgF,EAAexC,OAAOzC,GAAOuD,KAChEC,GAAmB,IAAXxD,EAAeyE,EAAYQ,EAAexC,OAAOzC,GAAOwD,OAAOqE,QAAQ,GAAK,KAE1F,OADA/F,QAAQ2D,IAAI,aAAc5F,GAExB,qBAAe5C,UAAU,kDAAzB,SACE,sBAAKA,UAAU,6BAAf,UACE,sBAAKA,UAAU,sDAAf,UACE,6BACE,sBAAMA,UAAU,6BAAhB,SAA8C4C,EAAIC,OAEpD,wBAAO7C,UAAU,GAAjB,qBAA6B4C,EAAI4B,aAEnC,sBAAKxE,UAAW,YAAhB,UACE,oBAAIA,UAAU,aAAd,SAA4B4C,EAAIwB,QAEhC,mBAAGpE,UAAU,GAAb,SAAiB4C,EAAI2B,iBAEvB,sBAAKvE,UAAU,gCAAf,UACGuJ,GAA+B,WAAjB3G,EAAI6B,UACjB,qBAAKoG,IAAKxB,EAAOzG,GAAM5C,UAAU,0BAA0B8K,IAAG,UAAKlI,EAAIwB,OAAS2G,MAAM,SAEvFxB,GAA+B,QAAjB3G,EAAI6B,UACjB,uBAAOzE,UAAU,UAAU+K,MAAM,OAAOC,UAAQ,EAACC,MAAI,EAACC,OAAK,EAA3D,SACE,wBAAQL,IAAKxB,EAAOzG,GAAMtB,KAAK,mBAIrC,iDACA,oBAAGtB,UAAU,gBAAb,wBAAkCgD,EAAMmG,OAAO,EAAE,GAAjD,cAAyDnG,EAAMmG,OAAOnG,EAAMoG,OAAS,QACzE,IAAXrG,EACG,sBAAK/C,UAAU,SAAf,UACE,qBAAKA,UAAU,6BAAf,SACIgD,IAAU+E,EAAQ5H,QAClB,wBAAQsI,QAAS0B,EAAY5H,MAAOQ,EAAO/C,UAAU,kBAArD,qBAEA,wBAAQyI,QAAS+B,EAAejI,MAAOQ,EAAO/C,UAAU,iBAAxD,wBAGJ,sBAAKA,UAAU,4DAAf,UACE,qBAAK6K,IC1IZ,6rQD0IsBE,MAAM,KAAKI,OAAO,KAAKnL,UAAU,2BAA2B8K,IAAI,eAC/E,2CAAYvE,WAGlBvD,IAAU+E,EAAQ5H,QAChB,uBAAMH,UAAU,UAAUoL,SAAU,SAACC,GAAD,OA3G3B,SAAC9C,EAAO1F,EAAIqH,GACnC3B,EAAM+C,iBAEN,IAAMC,EAAe1J,EAAK2J,MAAMC,MAAM/B,EAAUE,QAAQM,GAAKN,QAAQrH,MAAO,SAE5EkH,EAAclJ,SAASgD,QAAQmI,QAAQ1D,EAAezH,SAASoL,QAAQtG,QAASxC,GAAI8F,KAAK,CAAEC,KAAMb,EAAQ5H,UACxGmI,GAAG,mBAAmB,SAAC1E,GACtBoE,EAAehC,iBAAgB,MAEhCsC,GAAG,WAAW,SAACO,GACdb,EAAezH,SAASgD,QAAQqI,UAAU/I,EAAI0I,GAAc5C,KAAK,CAAEC,KAAMb,EAAQ5H,UAChFmI,GAAG,WAAW,SAACO,GACdb,EAAelC,SAAS+C,EAAQT,OAAOyD,MAAMtB,cAC7CvC,EAAehC,iBAAgB,MAEhCsC,GAAG,SAAS,SAACxD,GACZsC,OAAO0B,MAAM,uDACbd,EAAehC,iBAAgB,SA0FsB8F,CAAiBT,EAAGzI,EAAIC,GAAIqH,IAAvE,UACE,qBAAKlK,UAAU,qBAAf,SACE,wBAAQsB,KAAK,SAAStB,UAAU,oBAAhC,sBAEF,qBAAKA,UAAU,QAAf,SACE,uBACEsB,KAAK,SACLyK,KAAK,OACLC,YAAY,SACZhM,UAAU,eACViM,IAAKvC,EAAUE,QAAQM,UAI7B,4BAAG,6BAtDDA,SE/FLgC,EARC,WACd,OACE,qBAAKlM,UAAU,mBAAf,SACE,qBAAKA,UAAU,4CCHN,MAA0B,2C,0BCU1BmM,EANc,SAAC3K,GAAD,OAC3B,6CAAK4K,MAAM,6BAA6BC,QAAQ,eAAkB7K,GAAlE,aACE,sBAAMsI,KAAMtI,EAAM8K,OAAS,QAASC,EAAE,+pCCI3BC,EANS,SAAChL,GAAD,OACtB,6CAAK4K,MAAM,6BAA6BC,QAAQ,eAAkB7K,GAAlE,aACE,sBAAMsI,KAAMtI,EAAM8K,OAAS,QAASC,EAAE,2hBCI3BE,EANI,SAACjL,GAAD,OACjB,6CAAK4K,MAAM,6BAA6BC,QAAQ,eAAkB7K,GAAlE,aACE,sBAAMsI,KAAMtI,EAAM8K,OAAS,QAASC,EAAE,+QCQpCG,EAAgB,CACpB,CAAEpL,KAAM,MAAOqL,MAAO,QAASC,KAAM,gBAAEN,EAAF,EAAEA,MAAF,OAAa,cAAC,EAAD,CAAiBvB,MAAO,GAAIuB,MAAOA,MACrF,CAAEhL,KAAM,WAAYqL,MAAO,aAAcC,KAAM,gBAAEN,EAAF,EAAEA,MAAF,OAAa,cAAC,EAAD,CAAsBvB,MAAO,GAAIuB,MAAOA,MACpG,CAAEhL,KAAM,UAAWqL,MAAO,WAAYC,KAAM,gBAAEN,EAAF,EAAEA,MAAF,OAAa,cAAC,EAAD,CAAYvB,MAAO,GAAIuB,MAAOA,OAqD1EO,EAlDF,WACX,IAAMpD,EAAgB5J,qBAAWE,KAC3BiI,EAAiBnI,qBAAWyF,GAC5BwH,EAAmBrD,EAAchJ,WAAW2I,QAAUtG,SAAS2G,EAAcjJ,aACnF,EAA4CZ,mBAAS,OAArD,mBAAOmN,EAAP,KAAuBC,EAAvB,KAGA,OACE,sBAAKhN,UAAU,uBAAf,UACE,qBAAKA,UAAU,MAAf,SACE,sBAAM+I,KAAK,OAAO/I,UAAU,+CAA5B,SACE,sBAAKA,UAAU,0BAAf,UACE,qBAAK6K,IAAKoC,EAAMnC,IAAI,OAAOC,MAAM,MAAM/K,UAAU,UAC/CyJ,EAAc/I,cAAgB,cAACf,EAAA,EAAD,IAC/B8J,EAAc/I,cAAgB,cAAC,EAAD,WAIrC,uBACA,qBAAKV,UAAU,uDAAf,SACE,oBAAIA,UAAU,UAAd,SAAwB,gDAE1B,qBAAKA,UAAU,uDAAf,SACE,cAACkN,EAAA,EAAD,CAAazE,QAlBQ,SAACF,GAAD,OAAWyE,EAAkBzE,EAAMU,OAAO1G,QAkB/D,SAEImK,EAAc1F,KAAI,SAACb,EAAQgH,GAAT,OAChB,eAACC,EAAA,EAAD,CAEE7K,MAAO4D,EAAO7E,KACd+L,QAASlH,EAAO7E,OAASyL,EAAiB,QAAU,YAHtD,UAKE,cAAC5G,EAAOyG,KAAR,CAAaN,MAAOnG,EAAO7E,OAASyL,EAAiB,QAAU,UALjE,IAK8E,IAC3E5G,EAAOwG,QALH,UAAYQ,WAWzBL,GACA,sBAAK9M,UAAU,uDAAf,UACE,qBAAKA,UAAU,2BAA2B+I,KAAK,SAAS,cAAY,SACpE,2EAAgDU,EAAchJ,WAAW2I,OAAzE,IAAkFK,EAAcjJ,mBAGlGwH,EAAetC,cAAgB,cAAC,EAAD,CAAe6D,WAAYuD,EAAkBtD,WAAYuD,IACzF/E,EAAetC,cAAgB,cAAC,EAAD,Q,kBC8GvB4H,EArKH,WACV,IAAMvF,EAAUlI,qBAAWC,KACrB2J,EAAgB5J,qBAAWE,KAC3BiI,EAAiBnI,qBAAWyF,GAClC,EAAoD1F,oBAAS,GAA7D,mBAAO2N,EAAP,KAA2BC,EAA3B,KACAC,qBAAU,WAER,GAAI5L,EAAJ,CAKA,IAAM6L,EAAkB,uCAAG,0CAAA5L,EAAA,+EAGjBsF,OAAOC,SAASa,QAAQ,CAAEC,OAAQ,wBAHjB,sDAKvBtD,QAAQC,MAAR,MALuB,wBASHiD,EAAQ1H,YAAYwB,GATjB,eASnB1B,EATmB,iBAYD4H,EAAQzH,cAAcuB,GAZrB,WAYnBzB,EAZmB,OAenBuN,EAAqB1I,EAAc2I,SAASxN,GAC5CyN,EAAcpE,EAAc9I,aAAakB,EAAMoD,EAAe0I,GAE9DG,EAAqB3G,EAAeyG,SAASxN,GAC7C2N,EAAc/F,EAAerH,aAAakB,EAAMsF,EAAgB2G,IAEnED,EArBsB,kCAuBGpE,EAAc7I,gBAAgBiN,GAvBjC,QAuBjBrN,EAvBiB,OA0BvBiJ,EAAc5I,eAAegN,EAAarN,GAI1CqN,EAAYzF,OAAO4F,WAClB1F,GAAG,QAAQ,SAACC,GACXkB,EAAc1I,iBAAiB8M,EAAatF,EAAMgC,aAAa0D,QAAS1F,EAAMgC,aAAa2D,IAC3FzE,EAAcxI,iBAAgB,MAE/BqH,GAAG,SAAS,SAACxD,GACZD,QAAQ2D,IAAI1D,MApCS,wBAwCvB0I,GAAsB,GACtBpG,OAAO0B,MAAM,gEAzCU,YA4CtBiF,EA5CsB,kCA8CE/F,EAAerC,eAAeoI,GA9ChC,QA8CjBxI,EA9CiB,OAiDvByC,EAAepC,WAAWmI,EAAaxI,GAGvCpF,GAAW6H,EAAejC,cAAcgI,EAAa5N,GAIrD4N,EAAY3F,OAAOkC,cAClBhC,GAAG,QAAQ,SAACC,GACXP,EAAenC,YAAY0C,EAAMgC,aAAalE,SAC9CoD,EAAczI,YAAYuH,EAAMgC,aAAa1H,GAAI0F,EAAMgC,aAAatH,UACpE+E,EAAehC,iBAAgB,MAEhCsC,GAAG,SAAS,SAACxD,GACZD,QAAQ2D,IAAI1D,MAIdiJ,EAAY3F,OAAOyD,QAClBvD,GAAG,QAAQ,SAACC,GACXP,EAAelC,SAASyC,EAAMgC,cAC9BvC,EAAehC,iBAAgB,MAEhCsC,GAAG,SAAS,SAACxD,GACZD,QAAQ2D,IAAI1D,MAIdiJ,EAAY3F,OAAOuC,iBAClBrC,GAAG,QAAQ,SAACC,GACXP,EAAenC,YAAY0C,EAAMgC,aAAalE,SAC9CoD,EAAczI,YAAYuH,EAAMgC,aAAa1H,GAAI0F,EAAMgC,aAAavH,OACpEgF,EAAehC,iBAAgB,MAEhCsC,GAAG,SAAS,SAACxD,GACZD,QAAQ2D,IAAI1D,MApFS,wBAyFvBsC,OAAO0B,MAAM,yIAzFU,QA6FzBW,EAAcxI,iBAAgB,GAC9B+G,EAAehC,iBAAgB,GAG/BoB,OAAOC,SAASiB,GAAG,mBAAmB,SAACrG,GACrC8F,EAAQ1H,YAAYwB,GACpBI,EAAS,IAAM+F,EAAejC,cAAcgI,EAAa9L,EAAS,OAIpEmF,OAAOC,SAASiB,GAAG,gBAAgB,SAAC6F,GAClC/G,OAAOgH,SAASC,YAxGO,yDAAH,qDA4GxBX,SAhHEtG,OAAO0B,MAAM,8FAiHd,IAGC,IAAMwF,EAAwB,uCAAG,4BAAAxM,EAAA,6DAE3ByM,EAAc,CAAC,CACXJ,QAAS,OACTK,UAAW,aACXC,QAAS,CAAC,mDACVC,eAAgB,CACdpK,KAAM,eACNqK,OAAQ,OACRC,SAAU,IAEZC,kBAAmB,CAAC,kCAXG,kBAgBtBzH,OAAOC,SAASa,QAAQ,CAC7BC,OAAQ,0BACR2G,OAAQP,KAlBmB,2CAAH,qDAsB5BQ,EAAalN,GAAQ4H,EAAclJ,UAAYyH,EAAezH,SAC9DyO,EAAcnN,GAAQ4H,EAAclJ,UAAYyH,EAAezH,UAAYwH,EAAQ5H,QAEzF,OAEE,eAAC,IAAM8O,SAAP,WACI1B,GAAsB,qBAAKvN,UAAU,aAAf,SACE,wBACEyI,QAAS6F,EACTtO,UAAU,sEAFZ,gDAMzB+O,GAAc,cAAC,EAAD,IACdC,GAAe,cAAC,EAAD,QClKtBE,IAASC,OACP,cAAC,EAAD,UACE,cAAC,EAAD,UACE,cAAC,EAAD,UACE,cAAC,EAAD,UAINC,SAASC,eAAe,W","file":"static/js/main.016de868.chunk.js","sourcesContent":["import { useState, useContext } from 'react';\r\nimport '../../../app.css';\r\nimport Web3Context from '../../../store/web3-context';\r\nimport CollectionContext from '../../../store/collection-context';\r\n\r\nconst ipfsClient = require('ipfs-http-client');\r\nconst ipfs = ipfsClient.create({ host: 'ipfs.infura.io', port: 5001, protocol: 'https' });\r\n\r\nconst MintForm = () => {  \r\n  const [enteredName, setEnteredName] = useState('');\r\n  const [descriptionIsValid, setDescriptionIsValid] = useState(true);\r\n\r\n  const [enteredDescription, setEnteredDescription] = useState('');\r\n  const [nameIsValid, setNameIsValid] = useState(true);\r\n\r\n  const [enteredRarity, setEnteredRarity] = useState('');\r\n  const [rarityIsValid, setRarityIsValid] = useState(true);\r\n\r\n  const [enteredFiletype, setEnteredFiletype] = useState('Imagen');\r\n  const [FiletypeIsValid, setFiletypeIsValid] = useState(true);\r\n\r\n  const [capturedFileBuffer, setCapturedFileBuffer] = useState(null);\r\n  const [fileIsValid, setFileIsValid] = useState(true);\r\n\r\n  const web3Ctx = useContext(Web3Context);\r\n  const collectionCtx = useContext(CollectionContext);\r\n\r\n  const enteredNameHandler = (event) => {\r\n    setEnteredName(event.target.value);\r\n  };\r\n  \r\n  const enteredDescriptionHandler = (event) => {\r\n    setEnteredDescription(event.target.value);\r\n  };\r\n\r\n  const enteredRarityHandler = (event) => {\r\n    setEnteredRarity(event.target.value);\r\n  };\r\n\r\n  const enteredFiletypeHandler = (event) => {\r\n    setEnteredFiletype(event.target.value);\r\n  };\r\n  \r\n  const captureFile = (event) => {\r\n    event.preventDefault();\r\n\r\n    const file = event.target.files[0];\r\n\r\n    const reader = new window.FileReader();\r\n    reader.readAsArrayBuffer(file);\r\n    reader.onloadend = () => {\r\n      setCapturedFileBuffer(Buffer(reader.result));     \r\n    }\r\n  };\r\n  \r\n  const submissionHandler = (event) => {\r\n    event.preventDefault();\r\n\r\n    enteredName ? setNameIsValid(true) : setNameIsValid(false);\r\n    enteredDescription ? setDescriptionIsValid(true) : setDescriptionIsValid(false);\r\n    enteredRarity ? setRarityIsValid(true) : setRarityIsValid(false);\r\n    capturedFileBuffer ? setFileIsValid(true) : setFileIsValid(false);\r\n    enteredFiletype ? setFiletypeIsValid(true) : setFiletypeIsValid(false);\r\n    const formIsValid = enteredName && enteredDescription && enteredRarity && enteredFiletype && capturedFileBuffer;\r\n\r\n    // Upload file to IPFS and push to the blockchain\r\n    const mintNFT = async() => {\r\n      collectionCtx.setNftIsLoading(true); // block button\r\n        // Add file to the IPFS\r\n      const fileAdded = await ipfs.add(capturedFileBuffer);\r\n      if(!fileAdded) {\r\n        window.alert('Something went wrong when updloading the file');\r\n        collectionCtx.setNftIsLoading(false);\r\n        return;\r\n      }\r\n\r\n      const metadata = {\r\n        title: \"Asset Metadata\",\r\n        type: \"object\",\r\n        properties: {\r\n          name: {\r\n            type: \"string\",\r\n            description: enteredName\r\n          },\r\n          description: {\r\n            type: \"string\",\r\n            description: enteredDescription\r\n          },\r\n          rarity: {\r\n            type: \"string\",\r\n            description: enteredRarity\r\n          },\r\n          filetype: {\r\n            type: \"string\",\r\n            description: enteredFiletype\r\n          },\r\n          image: {\r\n            type: \"string\",\r\n            description: fileAdded.path\r\n          },\r\n          video: {\r\n            type: \"string\",\r\n            description: fileAdded.path\r\n          }\r\n        }\r\n      };\r\n\r\n      const metadataAdded = await ipfs.add(JSON.stringify(metadata));\r\n      if(!metadataAdded) {\r\n        window.alert('Something went wrong when updloading the file');\r\n        collectionCtx.setNftIsLoading(false);\r\n        return;\r\n      }\r\n      \r\n      collectionCtx.contract.methods.safeMint(metadataAdded.path).send({ from: web3Ctx.account })\r\n      .on('transactionHash', (hash) => {\r\n        collectionCtx.setNftIsLoading(true);\r\n      })\r\n      .on('receipt', (receipt) => {\r\n        const transfer = receipt.events.Transfer.returnValues\r\n        collectionCtx.updateCollection(collectionCtx.contract, transfer.tokenId, transfer.to);\r\n        collectionCtx.setNftIsLoading(false);\r\n      })\r\n      .on('error', (e) =>{\r\n        window.alert('Something went wrong when pushing to the blockchain');\r\n        collectionCtx.setNftIsLoading(false);  \r\n      })      \r\n    };\r\n\r\n    formIsValid && mintNFT();\r\n  };\r\n\r\n  const nameClass = nameIsValid? \"form-control\" : \"form-control is-invalid\";\r\n  const descriptionClass = descriptionIsValid? \"form-control\" : \"form-control is-invalid\";\r\n  const rarityClass = rarityIsValid? \"form-control\" : \"form-control is-invalid\";\r\n  const fileTypeClass = FiletypeIsValid? \"form-control\" : \"form-control is-invalid\";\r\n  const fileClass = fileIsValid? \"form-control\" : \"form-control is-invalid\";\r\n\r\n  return(\r\n    // <form onSubmit={submissionHandler}>\r\n    //   <div className=\"row justify-content-center m-3\">\r\n    //     <div className=\"col-md-2\">\r\n    //       <input\r\n    //         type='text'\r\n    //         className={`${nameClass} mb-1`}\r\n    //         placeholder='Nombre del NFT...'\r\n    //         value={enteredName}\r\n    //         onChange={enteredNameHandler}\r\n    //       />\r\n    //     </div>\r\n    //     <div className=\"col-md-6\">\r\n    //       <input\r\n    //         type='text'\r\n    //         className={`${descriptionClass} mb-1`}\r\n    //         placeholder='Descripción breve del NTF...'\r\n    //         value={enteredDescription}\r\n    //         onChange={enteredDescriptionHandler}\r\n    //       />\r\n    //     </div>\r\n    //     <div className=\"col-md-4\">\r\n    //       <input\r\n    //         type='text'\r\n    //         className={`${rarityClass} mb-1`}\r\n    //         placeholder='Nº de serie. Ejem: #4 de 10, Único... '\r\n    //         value={enteredRarity}\r\n    //         onChange={enteredRarityHandler}\r\n    //       />\r\n    //     </div>\r\n    //     <div className=\"col-md-2\">\r\n    //     <label>Seleccione el tipo de archivo</label>\r\n    //     <select className={`${fileTypeClass} mb-1`} onChange={enteredFiletypeHandler} value={enteredFiletype}>\r\n    //               <option value=\"Imagen\">Imagen</option>\r\n    //               <option value=\"MP4\">MP4</option>\r\n    //     </select>\r\n    //     </div>\r\n    //     <div className=\"col-md-2\">\r\n    //     <label>{enteredFiletype}</label>\r\n    //       <input\r\n    //         type='file'\r\n    //         className={`${fileClass} mb-1`}\r\n    //         onChange={captureFile}\r\n    //       />\r\n    //     </div>        \r\n    //   </div>\r\n    //   <button type='submit' disabled={collectionCtx.nftIsLoading} className='btn btn-lg btn-secondary btn-block m-2'>MINT</button>\r\n    // </form>\r\n    <>\r\n      <h2 className='text-center'>Deshabilitada la creación de NFTs temporalmente</h2>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MintForm;","import React from 'react';\r\n\r\nconst Web3Context = React.createContext({\r\n  account: null,\r\n  networkId: null,\r\n  loadAccount: () => {},\r\n  loadNetworkId: () => {}\r\n});\r\n\r\nexport default Web3Context;","import React from 'react';\r\n\r\nconst CollectionContext = React.createContext({\r\n  contract: null,\r\n  totalSupply: null,\r\n  collection: [],\r\n  nftIsLoading: true,\r\n  loadContract: () => {},\r\n  loadTotalSupply: () => {},\r\n  loadCollection: () => {},\r\n  updateTotalSupply: () => {},\r\n  updateCollection: () => {},\r\n  updateOwner: () => {},\r\n  setNftIsLoading: () => {}\r\n});\r\n\r\nexport default CollectionContext;","import { useReducer } from 'react';\r\n\r\nimport Web3Context from './web3-context';\r\n\r\nconst defaultWeb3State = {\r\n  account: null,\r\n  networkId: null\r\n};\r\n\r\nconst web3Reducer = (state, action) => {\r\n  if(action.type === 'ACCOUNT') {\r\n    return {\r\n      account: action.account,\r\n      networkId: state.networkId\r\n    };\r\n  } \r\n  \r\n  if(action.type === 'NETWORKID') {\r\n    return {\r\n      account: state.account,\r\n      networkId: action.networkId\r\n    };\r\n  }\r\n  \r\n  return defaultWeb3State;\r\n};\r\n\r\nconst Web3Provider = props => {\r\n  const [web3State, dispatchWeb3Action] = useReducer(web3Reducer, defaultWeb3State);\r\n  \r\n  const loadAccountHandler = async(web3) => {\r\n    const accounts = await web3.eth.getAccounts();\r\n    const account = accounts[0];\r\n    dispatchWeb3Action({type: 'ACCOUNT', account: account});\r\n    return account;\r\n  };\r\n\r\n  const loadNetworkIdHandler = async(web3) => {\r\n    const networkId = await web3.eth.net.getId();\r\n    dispatchWeb3Action({type: 'NETWORKID', networkId: networkId});\r\n    return networkId;   \r\n  };\r\n  \r\n  const web3Context = {\r\n    account:web3State.account,\r\n    networkId: web3State.networkId,\r\n    loadAccount: loadAccountHandler,\r\n    loadNetworkId: loadNetworkIdHandler\r\n  };\r\n  \r\n  return (\r\n    <Web3Context.Provider value={web3Context}>\r\n      {props.children}\r\n    </Web3Context.Provider>\r\n  );\r\n};\r\n\r\nexport default Web3Provider;","import { useReducer } from 'react';\r\n\r\nimport CollectionContext from './collection-context';\r\n\r\nconst defaultCollectionState = {\r\n  contract: null,\r\n  totalSupply: null,\r\n  collection: [],\r\n  nftIsLoading: true\r\n};\r\n\r\nconst collectionReducer = (state, action) => {\r\n  if(action.type === 'CONTRACT') {    \r\n    return {\r\n      contract: action.contract,\r\n      totalSupply: state.totalSupply,\r\n      collection: state.collection,\r\n      nftIsLoading: state.nftIsLoading\r\n    };\r\n  } \r\n  \r\n  if(action.type === 'LOADSUPPLY') {\r\n    return {\r\n      contract: state.contract,\r\n      totalSupply: action.totalSupply,\r\n      collection: state.collection,\r\n      nftIsLoading: state.nftIsLoading\r\n    };\r\n  }\r\n\r\n  if(action.type === 'LOADCOLLECTION') {    \r\n    return {\r\n      contract: state.contract,\r\n      totalSupply: state.totalSupply,\r\n      collection: action.collection,\r\n      nftIsLoading: state.nftIsLoading\r\n    };\r\n  }\r\n\r\n  if(action.type === 'UPDATECOLLECTION') {    \r\n    const index = state.collection.findIndex(NFT => NFT.id === parseInt(action.NFT.id));\r\n    let collection = [];\r\n\r\n    if(index === -1) {\r\n      collection = [action.NFT, ...state.collection];\r\n    } else {\r\n      collection = [...state.collection];\r\n    }    \r\n\r\n    return {\r\n      contract: state.contract,\r\n      totalSupply: state.totalSupply,\r\n      collection: collection,\r\n      nftIsLoading: state.nftIsLoading\r\n    };\r\n  }\r\n\r\n  if(action.type === 'UPDATEOWNER') {\r\n    const index = state.collection.findIndex(NFT => NFT.id === parseInt(action.id));\r\n    let collection = [...state.collection];\r\n    collection[index].owner = action.newOwner;\r\n\r\n    return {\r\n      contract: state.contract,\r\n      totalSupply: state.totalSupply,\r\n      collection: collection,\r\n      nftIsLoading: state.nftIsLoading\r\n    };\r\n  }\r\n\r\n  if(action.type === 'LOADING') {    \r\n    return {\r\n      contract: state.contract,\r\n      totalSupply: state.totalSupply,\r\n      collection: state.collection,\r\n      nftIsLoading: action.loading\r\n    };\r\n  }\r\n  \r\n  return defaultCollectionState;\r\n};\r\n\r\nconst CollectionProvider = props => {\r\n  const [CollectionState, dispatchCollectionAction] = useReducer(collectionReducer, defaultCollectionState);\r\n  \r\n  const loadContractHandler = (web3, NFTCollection, deployedNetwork) => {\r\n    const contract = deployedNetwork ? new web3.eth.Contract(NFTCollection.abi, deployedNetwork.address): '';\r\n    dispatchCollectionAction({type: 'CONTRACT', contract: contract}); \r\n    return contract;\r\n  };\r\n\r\n  const loadTotalSupplyHandler = async(contract) => {\r\n    const totalSupply = await contract.methods.totalSupply().call();\r\n    dispatchCollectionAction({type: 'LOADSUPPLY', totalSupply: totalSupply});\r\n    return totalSupply;\r\n  };\r\n\r\n  const loadCollectionHandler = async(contract, totalSupply) => {\r\n    let collection = [];\r\n    for(let i = parseInt(totalSupply); i >= 1; i--) {\r\n      const hash = await contract.methods.tokenURI(i).call();\r\n      try {\r\n        const response = await fetch(\r\n          `https://nftstorage.link/ipfs/${hash}?clear`\r\n        );\r\n        if(!response.ok) {\r\n          throw new Error('Something went wrong');\r\n        }\r\n\r\n        const metadata = await response.json();\r\n        const owner = await contract.methods.ownerOf(i).call();\r\n\r\n        collection = [...collection, {\r\n          id: i,\r\n          title: metadata.properties.name.description,\r\n          description: metadata.properties.description.description,\r\n          rarity: metadata.properties.rarity.description,\r\n          filetype: metadata.properties.filetype.description,\r\n          img: metadata.properties.image.description,\r\n          video: metadata.properties.video.description,\r\n          owner: owner\r\n        }];\r\n        dispatchCollectionAction({type: 'LOADCOLLECTION', collection: collection});\r\n      }catch {\r\n        console.error('Something went wrong');\r\n      }\r\n    }\r\n    // dispatchCollectionAction({type: 'LOADCOLLECTION', collection: collection});     \r\n  };\r\n\r\n  const updateCollectionHandler = async(contract, id, owner) => {\r\n    let NFT;\r\n    const hash = await contract.methods.tokenURI(id).call();\r\n\r\n    try {\r\n      const response = await fetch(\r\n        `https://nftstorage.link/ipfs/${hash}?clear`\r\n      );\r\n      if(!response.ok) {\r\n        throw new Error('Something went wrong');      }\r\n\r\n      const metadata = await response.json();      \r\n\r\n      NFT = {\r\n        id: parseInt(id),\r\n        title: metadata.properties.name.description,\r\n        description: metadata.properties.description.description,\r\n        rarity: metadata.properties.rarity.description,\r\n        filetype: metadata.properties.filetype.description,\r\n        img: metadata.properties.image.description,\r\n        video: metadata.properties.video.description,\r\n        owner: owner\r\n      };\r\n    }catch {\r\n      console.error('Something went wrong');\r\n    }\r\n    dispatchCollectionAction({type: 'UPDATECOLLECTION', NFT: NFT});\r\n  };\r\n\r\n  const updateOwnerHandler = (id, newOwner) => {\r\n    dispatchCollectionAction({type: 'UPDATEOWNER', id: id, newOwner: newOwner});\r\n  };\r\n\r\n  const setNftIsLoadingHandler = (loading) => {\r\n    dispatchCollectionAction({type: 'LOADING', loading: loading});\r\n  };\r\n\r\n  const collectionContext = {\r\n    contract: CollectionState.contract,\r\n    totalSupply: CollectionState.totalSupply,\r\n    collection: CollectionState.collection,\r\n    nftIsLoading:CollectionState.nftIsLoading,\r\n    loadContract: loadContractHandler,\r\n    loadTotalSupply: loadTotalSupplyHandler,\r\n    loadCollection: loadCollectionHandler,\r\n    updateCollection: updateCollectionHandler,\r\n    updateOwner: updateOwnerHandler,\r\n    setNftIsLoading: setNftIsLoadingHandler\r\n  };\r\n  \r\n  return (\r\n    <CollectionContext.Provider value={collectionContext}>\r\n      {props.children}\r\n    </CollectionContext.Provider>\r\n  );\r\n};\r\n\r\nexport default CollectionProvider;","import React from 'react';\r\n\r\nconst MarketplaceContext = React.createContext({\r\n  contract: null,\r\n  offerCount: null,\r\n  offers: [],\r\n  userFunds: null,\r\n  mktIsLoading: true,\r\n  loadContract: () => {},\r\n  loadOfferCount: () => {},\r\n  loadOffers: () => {},\r\n  updateOffer: () => {},\r\n  addOffer: () => {},\r\n  loadUserFunds: () => {},\r\n  setMktIsLoading: () => {}\r\n});\r\n\r\nexport default MarketplaceContext;","import { useReducer } from 'react';\r\n\r\nimport MarketplaceContext from './marketplace-context';\r\n\r\nconst defaultMarketplaceState = {\r\n  contract: null,\r\n  offerCount: null,\r\n  offers: [],\r\n  userFunds: null,\r\n  mktIsLoading: true\r\n};\r\n\r\nconst marketplaceReducer = (state, action) => {\r\n  if(action.type === 'CONTRACT') {    \r\n    return {\r\n      contract: action.contract,\r\n      offerCount: state.offerCount,\r\n      offers: state.offers,\r\n      userFunds: state.userFunds,\r\n      mktIsLoading: state.mktIsLoading\r\n    };\r\n  }\r\n\r\n  if(action.type === 'LOADOFFERCOUNT') {    \r\n    return {\r\n      contract: state.contract,\r\n      offerCount: action.offerCount,\r\n      offers: state.offers,\r\n      userFunds: state.userFunds,\r\n      mktIsLoading: state.mktIsLoading\r\n    };\r\n  }\r\n\r\n  if(action.type === 'LOADOFFERS') {    \r\n    return {\r\n      contract: state.contract,\r\n      offerCount: state.offerCount,\r\n      offers: action.offers,\r\n      userFunds: state.userFunds,\r\n      mktIsLoading: state.mktIsLoading\r\n    };\r\n  }\r\n\r\n  if(action.type === 'UPDATEOFFER') {    \r\n    const offers = state.offers.filter(offer => offer.offerId !== parseInt(action.offerId));\r\n\r\n    return {\r\n      contract: state.contract,\r\n      offerCount: state.offerCount,\r\n      offers: offers,\r\n      userFunds: state.userFunds,\r\n      mktIsLoading: state.mktIsLoading\r\n    };\r\n  }\r\n\r\n  if(action.type === 'ADDOFFER') {    \r\n    const index = state.offers.findIndex(offer => offer.offerId === parseInt(action.offer.offerId));\r\n    let offers = [];\r\n\r\n    if(index === -1) {\r\n      offers = [...state.offers, {\r\n        offerId: parseInt(action.offer.offerId),\r\n        id: parseInt(action.offer.id),\r\n        user: (action.offer.user),\r\n        price: parseInt(action.offer.price),\r\n        fulfilled: false,\r\n        cancelled: false\r\n      }];\r\n    } else {\r\n      offers = [...state.offers];\r\n    }    \r\n\r\n    return {\r\n      contract: state.contract,\r\n      offerCount: state.offerCount,\r\n      offers: offers,\r\n      userFunds: state.userFunds,\r\n      mktIsLoading: state.mktIsLoading\r\n    };\r\n  }\r\n\r\n  if(action.type === 'LOADFUNDS') {\r\n    return {\r\n      contract: state.contract,\r\n      offerCount: state.offerCount,\r\n      offers: state.offers,\r\n      userFunds: action.userFunds,\r\n      mktIsLoading: state.mktIsLoading\r\n    };\r\n  }\r\n\r\n  if(action.type === 'LOADING') {    \r\n    return {\r\n      contract: state.contract,\r\n      offerCount: state.offerCount,\r\n      offers: state.offers,\r\n      userFunds: state.userFunds,\r\n      mktIsLoading: action.loading\r\n    };\r\n  }\r\n  \r\n  return defaultMarketplaceState;\r\n};\r\n\r\nconst MarketplaceProvider = props => {\r\n  const [MarketplaceState, dispatchMarketplaceAction] = useReducer(marketplaceReducer, defaultMarketplaceState);\r\n  \r\n  const loadContractHandler = (web3, NFTMarketplace, deployedNetwork) => {\r\n    const contract = deployedNetwork ? new web3.eth.Contract(NFTMarketplace.abi, deployedNetwork.address): '';\r\n    dispatchMarketplaceAction({type: 'CONTRACT', contract: contract}); \r\n    return contract;\r\n  };\r\n\r\n  const loadOfferCountHandler = async(contract) => {\r\n    const offerCount = await contract.methods.offerCount().call();\r\n    dispatchMarketplaceAction({type: 'LOADOFFERCOUNT', offerCount: offerCount});\r\n    return offerCount;\r\n  };\r\n\r\n  const loadOffersHandler = async(contract, offerCount) => {\r\n    let offers = [];\r\n    for(let i = 0; i < offerCount; i++) {\r\n      const offer = await contract.methods.offers(i + 1).call();\r\n      offers.push(offer);\r\n    }\r\n    offers = offers\r\n    .map(offer => {\r\n      offer.offerId = parseInt(offer.offerId);\r\n      offer.id = parseInt(offer.id);\r\n      offer.price = parseInt(offer.price);\r\n      return offer;\r\n    })\r\n    .filter(offer => offer.fulfilled === false && offer.cancelled === false); \r\n    dispatchMarketplaceAction({type: 'LOADOFFERS', offers: offers});\r\n  };\r\n\r\n  const updateOfferHandler = (offerId) => {\r\n    dispatchMarketplaceAction({type: 'UPDATEOFFER', offerId: offerId});   \r\n  };\r\n\r\n  const addOfferHandler = (offer) => {\r\n    dispatchMarketplaceAction({type: 'ADDOFFER', offer: offer});   \r\n  };\r\n\r\n  const loadUserFundsHandler = async(contract, account) => {\r\n    const userFunds = await contract.methods.userFunds(account).call();\r\n    dispatchMarketplaceAction({type: 'LOADFUNDS', userFunds: userFunds});\r\n    return userFunds;\r\n  };\r\n\r\n  const setMktIsLoadingHandler = (loading) => {\r\n    dispatchMarketplaceAction({type: 'LOADING', loading: loading});\r\n  };\r\n\r\n  const marketplaceContext = {\r\n    contract: MarketplaceState.contract,\r\n    offerCount: MarketplaceState.offerCount,\r\n    offers: MarketplaceState.offers,\r\n    userFunds: MarketplaceState.userFunds,\r\n    mktIsLoading: MarketplaceState.mktIsLoading,\r\n    loadContract: loadContractHandler,\r\n    loadOfferCount: loadOfferCountHandler,\r\n    loadOffers: loadOffersHandler,\r\n    updateOffer: updateOfferHandler,\r\n    addOffer: addOfferHandler,\r\n    loadUserFunds: loadUserFundsHandler,\r\n    setMktIsLoading: setMktIsLoadingHandler\r\n  };\r\n  \r\n  return (\r\n    <MarketplaceContext.Provider value={marketplaceContext}>\r\n      {props.children}\r\n    </MarketplaceContext.Provider>\r\n  );\r\n};\r\n\r\nexport default MarketplaceProvider;","import Web3 from 'web3';\r\n\r\n// Web 3 connection\r\nconst web3 = window.ethereum ? new Web3(window.ethereum) : null; \r\n\r\nexport default web3;","export const DECIMALS = (10**18);\r\n\r\nexport const ether = wei => wei / DECIMALS;\r\n\r\nexport const formatPrice = (price) => {\r\n  const precision = 100; // Use 2 decimal places\r\n\r\n  price = ether(price);\r\n  price = Math.round(price * precision) / precision;\r\n   \r\n  return price;\r\n};","import { useContext, useState } from 'react';\r\nimport '../../app.css';\r\nimport Web3Context from '../../store/web3-context';\r\nimport MarketplaceContext from '../../store/marketplace-context';\r\nimport web3 from '../../connection/web3';\r\nimport { formatPrice } from '../../helpers/utils';\r\n\r\nconst Navbar = () => {\r\n  const [fundsLoading, setFundsLoading] = useState(false);\r\n  \r\n  const web3Ctx = useContext(Web3Context);\r\n  const marketplaceCtx = useContext(MarketplaceContext);\r\n  \r\n  const connectWalletHandler = async() => {\r\n    try {\r\n      // Request account access\r\n      await window.ethereum.request({ method: 'eth_requestAccounts' });\r\n    } catch(error) {\r\n      console.error(error);\r\n    }\r\n\r\n    // Load accounts\r\n    web3Ctx.loadAccount(web3);\r\n  };\r\n\r\n  const claimFundsHandler = () => {\r\n    marketplaceCtx.contract.methods.claimFunds().send({ from: web3Ctx.account })\r\n    .on('transactionHash', (hash) => {\r\n      setFundsLoading(true);\r\n    })\r\n    .on('receipt', (receipt) => {\r\n      marketplaceCtx.loadUserFunds(marketplaceCtx.contract, web3Ctx.account);\r\n      setFundsLoading(false);\r\n    })\r\n    .on('error', (error) => {\r\n      window.alert('Something went wrong when pushing to the blockchain');\r\n      setFundsLoading(false);\r\n    });\r\n  };\r\n\r\n  // TODO: revisar porque las subscripciones a eventos no se lanzan...de momento lo tratamos directamente en el callback del send de la transacción\r\n  // Event ClaimFunds subscription \r\n  marketplaceCtx.contract.events.ClaimFunds()\r\n  .on('data', (event) => {\r\n    marketplaceCtx.loadUserFunds(marketplaceCtx.contract, web3Ctx.account);\r\n    setFundsLoading(false);\r\n  })\r\n  .on('error', (error) => {\r\n    console.log(error);\r\n  });\r\n\r\n  let etherscanUrl;\r\n\r\n  if(web3Ctx.networkId === 3) {\r\n    etherscanUrl = 'https://ropsten.etherscan.io'\r\n  } else if(web3Ctx.networkId === 4) {\r\n    etherscanUrl = 'https://rinkeby.etherscan.io'\r\n  } else if(web3Ctx.networkId === 5) {\r\n    etherscanUrl = 'https://goerli.etherscan.io'\r\n  } else {\r\n    etherscanUrl = 'https://testnet.bscscan.com/'\r\n  }\r\n  \r\n  return (\r\n  <nav className=\"navbar navbar-dark bg-dark\">\r\n    <div className=\"container-fluid\">  \r\n        {web3Ctx.account && \r\n        <div className=\"navbar-brand\">\r\n          <h3 className=\"text-white\">¡Bienvenido Malandriner! </h3>\r\n        </div> }\r\n        {marketplaceCtx.userFunds > 0 &&\r\n          <div className=\"navbar-toggler\">\r\n            {!fundsLoading &&\r\n              <button \r\n                type=\"button\" \r\n                className=\"btn btn-danger btn-block navbar-btn text-white\" \r\n                onClick={claimFundsHandler}\r\n              >          \r\n                {`RECOJA SU DINERO: ${formatPrice(marketplaceCtx.userFunds)} BNB`}\r\n              </button>}\r\n            {fundsLoading &&\r\n              <div className=\"d-flex justify-content-center text-info\">\r\n                <div className=\"spinner-border\" role=\"status\">\r\n                  <span className=\"sr-only\"></span>\r\n                </div>\r\n            </div>}          \r\n          </div>\r\n        }\r\n        <div className=\"navbar-toggler\">\r\n          {web3Ctx.account && \r\n            <a \r\n              className=\"nav-link small\" \r\n              href=\"https://discord.gg/bnbchain\"\r\n              target=\"blank\"\r\n              rel=\"noopener noreferrer\">\r\n            <button \r\n              type=\"button\" \r\n              className=\"btn btn-success text-white\" \r\n            > \r\n              Faucet de BNBs\r\n            </button>\r\n            </a>}\r\n        </div>\r\n        <div className=\"navbar-toggler\">\r\n          {web3Ctx.account && \r\n            <a \r\n              className=\"nav-link small\" \r\n              href={`${etherscanUrl}/address/${web3Ctx.account}`}\r\n              target=\"blank\"\r\n              rel=\"noopener noreferrer\"\r\n            > {`${web3Ctx.account.substr(0,7)}...${web3Ctx.account.substr(web3Ctx.account.length - 7)}`}\r\n            </a>}\r\n          {!web3Ctx.account && \r\n            <button \r\n              type=\"button\" \r\n              className=\"btn btn-info text-white\" \r\n              onClick={connectWalletHandler} \r\n            > \r\n              Connect your wallet\r\n            </button>}\r\n        </div>\r\n    </div>  \r\n  </nav>\r\n  \r\n  );  \r\n};\r\n\r\nexport default Navbar;","import { useContext, useRef, createRef } from 'react';\r\n\r\nimport web3 from '../../../connection/web3';\r\nimport Web3Context from '../../../store/web3-context';\r\nimport CollectionContext from '../../../store/collection-context';\r\nimport MarketplaceContext from '../../../store/marketplace-context';\r\nimport { formatPrice } from '../../../helpers/utils';\r\nimport eth from '../../../img/bnb.png';\r\n\r\nconst nftURL = (nft) => `https://nftstorage.link/ipfs/${nft.img}`;\r\n\r\nconst NFTCollection = ({ showImages = true, filterType = 'ALL' }) => {\r\n  const web3Ctx = useContext(Web3Context);\r\n  const collectionCtx = useContext(CollectionContext);\r\n  const marketplaceCtx = useContext(MarketplaceContext);\r\n\r\n  const priceRefs = useRef([]);\r\n  if (priceRefs.current.length !== collectionCtx.collection.length) {\r\n    priceRefs.current = Array(collectionCtx.collection.length).fill().map((_, i) => priceRefs.current[i] || createRef());\r\n  }\r\n\r\n  const filteredNFTS = collectionCtx.collection.map((NFT, key) => {\r\n    return { key, NFT } // mantenemos el indice 'key' original\r\n  }).filter(({ key, NFT }) => {\r\n    if (filterType === 'FOR_SALE') {\r\n      const index = marketplaceCtx.offers ? marketplaceCtx.offers.findIndex(offer => offer.id === NFT.id) : -1;\r\n      return index !== -1 // if found, for sale\r\n    }\r\n    if (filterType === 'MY_NFTS') {\r\n      const index = marketplaceCtx.offers ? marketplaceCtx.offers.findIndex(offer => offer.id === NFT.id) : -1;\r\n      const owner = index === -1 ? NFT.owner : marketplaceCtx.offers[index].user;\r\n      return owner === web3Ctx.account  // compare owner with current account\r\n    }\r\n    return true // show all by default, filterType 'ALL'\r\n  })\r\n  \r\n  const makeOfferHandler = (event, id, key) => {\r\n    event.preventDefault();\r\n\r\n    const enteredPrice = web3.utils.toWei(priceRefs.current[key].current.value, 'ether');\r\n\r\n    collectionCtx.contract.methods.approve(marketplaceCtx.contract.options.address, id).send({ from: web3Ctx.account })\r\n    .on('transactionHash', (hash) => {\r\n      marketplaceCtx.setMktIsLoading(true);\r\n    })\r\n    .on('receipt', (receipt) => {      \r\n      marketplaceCtx.contract.methods.makeOffer(id, enteredPrice).send({ from: web3Ctx.account })\r\n      .on('receipt', (receipt) => {\r\n        marketplaceCtx.addOffer(receipt.events.Offer.returnValues);\r\n        marketplaceCtx.setMktIsLoading(false);\r\n      })\r\n      .on('error', (error) => {\r\n        window.alert('Something went wrong when pushing to the blockchain');\r\n        marketplaceCtx.setMktIsLoading(false);\r\n      }); \r\n    });\r\n  };\r\n  \r\n  const buyHandler = (event) => {    \r\n    const buyIndex = parseInt(event.target.value);      \r\n    marketplaceCtx.contract.methods.fillOffer(marketplaceCtx.offers[buyIndex].offerId).send({ from: web3Ctx.account, value: marketplaceCtx.offers[buyIndex].price })\r\n    .on('transactionHash', (hash) => {\r\n      marketplaceCtx.setMktIsLoading(true);\r\n    })\r\n    .on('receipt', (receipt) => {\r\n      const offer = receipt.events.OfferFilled.returnValues\r\n      marketplaceCtx.updateOffer(offer.offerId);\r\n      collectionCtx.updateOwner(offer.id, offer.newOwner);\r\n      marketplaceCtx.setMktIsLoading(false);\r\n    })\r\n    .on('error', (error) => {\r\n      window.alert('Something went wrong when pushing to the blockchain');\r\n      marketplaceCtx.setMktIsLoading(false);\r\n    });            \r\n  };\r\n\r\n  const cancelHandler = (event) => {    \r\n    const cancelIndex = parseInt(event.target.value);\r\n    marketplaceCtx.contract.methods.cancelOffer(marketplaceCtx.offers[cancelIndex].offerId).send({ from: web3Ctx.account })\r\n    .on('transactionHash', (hash) => {\r\n      marketplaceCtx.setMktIsLoading(true);\r\n    })\r\n    .on('receipt', (receipt) => {\r\n      const offer = receipt.events.OfferCancelled.returnValues\r\n      marketplaceCtx.updateOffer(offer.offerId);\r\n      collectionCtx.updateOwner(offer.id, offer.owner);\r\n      marketplaceCtx.setMktIsLoading(false);\r\n    })\r\n    .on('error', (error) => {\r\n      window.alert('Something went wrong when pushing to the blockchain');\r\n      marketplaceCtx.setMktIsLoading(false);\r\n    });    \r\n  };\r\n \r\n  return(\r\n    <div className=\"row text-center\">\r\n     \r\n      {filteredNFTS.map(({NFT, key}) => {\r\n        const index = marketplaceCtx.offers ? marketplaceCtx.offers.findIndex(offer => offer.id === NFT.id) : -1;\r\n        const owner = index === -1 ? NFT.owner : marketplaceCtx.offers[index].user;\r\n        const price = index !== -1 ? formatPrice(marketplaceCtx.offers[index].price).toFixed(2) : null;\r\n        console.log('objeto NFT', NFT);\r\n        return(\r\n          <div key={key} className=\"col-xxl-2 col-xl-3 col-lg-4 col-md-6 py-3 px-3 \">\r\n            <div className=\"card border-info h-100 p-3\">\r\n              <div className='d-flex justify-content-between align-items-baseline'>\r\n                <h5>\r\n                  <span className=\"badge bg-warning text-dark\">{NFT.id}</span>\r\n                </h5>\r\n                <small className=\"\">Rareza: {NFT.rarity}</small>\r\n              </div>\r\n              <div className={\"card-body\"}>       \r\n                <h3 className=\"card-title\">{NFT.title}</h3>\r\n                \r\n                <p className=\"\">{NFT.description}</p>\r\n              </div>\r\n              <div className='d-flex justify-content-center'>\r\n                {showImages && NFT.filetype === \"Imagen\" &&\r\n                  <img src={nftURL(NFT)} className=\"card-img-bottom rounded\" alt={`${NFT.title}`} width=\"100%\" /> \r\n                }\r\n                {showImages && NFT.filetype === \"MP4\" &&\r\n                  <video className=\"rounded\" width=\"100%\" autoPlay loop muted>\r\n                    <source src={nftURL(NFT)} type=\"video/mp4\"/>\r\n                  </video> \r\n                }\r\n              </div>\r\n              <label>Propietario:</label>\r\n              <p className=\"fw-light fs-6\"> {`${owner.substr(0,7)}...${owner.substr(owner.length - 7)}`}</p>\r\n              {index !== -1 ?\r\n                  <div className=\"d-flex\">\r\n                    <div className=\"d-grid gap-2 col-5 mx-auto\">\r\n                      { owner !== web3Ctx.account ?\r\n                        <button onClick={buyHandler} value={index} className=\"btn btn-success\">COMPRAR</button>\r\n                        :\r\n                        <button onClick={cancelHandler} value={index} className=\"btn btn-danger\">CANCELAR</button>\r\n                      }\r\n                    </div>\r\n                    <div className=\"col-7 d-flex justify-content-end align-items-center gap-1\">\r\n                      <img src={eth} width=\"25\" height=\"25\" className=\"align-center float-start\" alt=\"price icon\" ></img>                \r\n                      <strong>{`${price}`}</strong>\r\n                    </div>\r\n                  </div> :\r\n                owner === web3Ctx.account ?              \r\n                  <form className=\"row g-2\" onSubmit={(e) => makeOfferHandler(e, NFT.id, key)}>                \r\n                    <div className=\"col-5 d-grid gap-2\">\r\n                      <button type=\"submit\" className=\"btn btn-secondary\">VENDER</button>\r\n                    </div>\r\n                    <div className=\"col-7\">\r\n                      <input\r\n                        type=\"number\"\r\n                        step=\"0.01\"\r\n                        placeholder=\"BNB...\"\r\n                        className=\"form-control\"\r\n                        ref={priceRefs.current[key]}\r\n                      />\r\n                    </div>                                  \r\n                  </form> :\r\n                  <p><br/></p>}\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NFTCollection;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAADAFBMVEVHcEzyui/zuS7yuS7//xfufw3zui75/wDyuS//rT3yui/yvjPWcw3oAADrsDHyuS7/vz/yuS/ZfzDzui/ttS7xuS7zui/0vTDzui7zui/suC7yuS7zui6/vzv1uS/zsjPusy7wuTD3vTDzuS7zuS71uy/0ui7xuS70ui/zuS7wty/0ui/1uy/vtyvyuC7yuS3vuC3zui/0ui72vS/zuy7yuS3yuS30ui7zvC/yuS7zui7yuS7zuy7xuC7yuS7yuS7zui70ui70uy/xuS70ui7zui7yui70ui72vS/zuS/0ui/zuy7yui7zuS7xuS3yuS7xuS3zuS3zuy7zui72vC7zuy71uS7wuC75vi/zui7zui/yuS/0ui/yui7xui7vuy3zuy73uzH0uy/0ujDyuS/xuC31uzD3vS/xtzH4vS/0ui3zui7zuy7zui30uy70ui70ui7zuS7xty/0uy/wuC7zuy/yuS/zuS/zuy/3vi/3wDD1szD4vzDzui7zui/utS77wzH5vy/yui7zuC/5xDH2vC78wjD7xTH7xDHxty31vC/uuS71tS7zui/////zujD///7//vzzuzHzuCnztybzuzL30XP0uy///v3zuzP//vv///330HPztyf3vDDzujH0xEz1xEvzuCjzuSz++e78wDD8wTD/xDH1xlD0vjz+9uP2vC/++vD5vzD3vTD+9uLzuSrzuCbztyj1xlHzuS387szzuCr0ui/7wDD/xTL1xE30vzz+wzH0wED989z6vzD1uy/++vH++ezzuCv//PP0wEH1xU/99d/99Nz878/30HLyuCfzvDPzui3ztyX++/L99eD+9N787sr//frzuSv1xFD/yDL/yzP/xjL+9+P99uH0vz78783yuCn0wUH+wjH++Ob88ND98M/1xU7+9+X9wjH4vjD98dP0w0v///z99Nv/xzL/yTL99N7/xTH98ND2vDD30HT30XTzvDT9xDH0wUX98dL98tf87cn30XX++O330HH++/PyuSr+xDH989gh6Ej4AAAAn3RSTlMA/fv8AgL8Af4D/gYDAQX6BP0E/RL9+Qjjwgvh+wQfChwUs8B1/o9l/k4v9Bgbp5E6+IL99S2phmbV0OcdQihxnTOnoMuvle3xN4C0+56K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\"","const Spinner = () => {\r\n  return(\r\n    <div className=\"text-center mt-5\">\r\n      <div className=\"spinner-border text-info text-center\"></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Spinner;","export default __webpack_public_path__ + \"static/media/malanftdriners.44fb316c.png\";","import * as React from \"react\";\r\n\r\n// FROM: https://fontawesome.com/icons/money-check-dollar?s=solid\r\n// Converted with: https://react-svgr.com/playground/\r\nconst MoneyCheckDollarIcon = (props) => (\r\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 576 512\" {...props}>\r\n    <path fill={props.color || 'black'} d=\"M512 64c35.3 0 64 28.65 64 64v256c0 35.3-28.7 64-64 64H64c-35.35 0-64-28.7-64-64V128c0-35.35 28.65-64 64-64h448zM272 192c-8.8 0-16 7.2-16 16s7.2 16 16 16h224c8.8 0 16-7.2 16-16s-7.2-16-16-16H272zm0 128h224c8.8 0 16-7.2 16-16s-7.2-16-16-16H272c-8.8 0-16 7.2-16 16s7.2 16 16 16zM164.1 160c0-11.1-9-20.1-21-20.1-10.2 0-19.2 9-19.2 20.1v6c-5.6 1.2-11.8 2.9-15.9 5.1-14.94 6.8-27.93 19.4-31.09 37.7-1.77 10.2-.83 20.1 3.41 29 4.15 8.8 10.68 15 17.31 19.5 11.57 7.9 26.87 12.5 38.57 16l2.2.6c14 4.3 23.4 7.4 29.3 11.7 2.5 1.8 3.4 3.2 3.7 4.1.4.8 1 2.6.3 6.6-.6 3.5-2.5 6.5-8 8.8-6.1 2.6-16 3.9-28.8 1.9-6-1-16.7-4.6-26.2-7.8-2.2-.8-4.4-1.5-6.4-2.2-10.46-3.5-21.79 2.2-25.28 12.7-3.49 10.5 2.18 21.8 12.66 24.4 1.21 1.3 2.71 1.8 4.43 2.4 6.99 2.7 20.29 6.9 29.79 9.1v6.4c0 11.1 9 20.1 19.2 20.1 12 0 21-9 21-20.1v-5.5c5.3-1 10.5-3.4 15.3-4.6 15.8-6.7 28.4-19.7 31.7-38.7 1.8-10.4 1-20.4-3-29.5-3.9-9-10.2-15.6-16.9-20.4-12.1-8.9-28.3-13.7-40.4-17.4l-1.7-.2c-13.3-4.3-22.9-7.3-29-11.5-2.6-1.8-3.4-3-3.6-3.5-.2-.4-.8-1.6-.2-5 .4-2 1.9-5.3 8.2-8.1 5.6-2.9 16.4-4.5 28.6-3.5 4.4 1.6 17.9 4.2 21.8 5.2 10.6 2.9 21.6-3.5 24.4-14.2 2.9-10.6-3.5-21.6-14.2-24.4-4.4-1.2-14.4-3.2-21-4.4V160z\" />\r\n  </svg>\r\n);\r\n\r\nexport default MoneyCheckDollarIcon","import * as React from \"react\";\r\n\r\n// FROM: https://fontawesome.com/icons/address-card?s=solid\r\n// Converted with: https://react-svgr.com/playground/\r\nconst AddressCardIcon = (props) => (\r\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 576 512\" {...props}>\r\n    <path fill={props.color || 'black'} d=\"M512 32H64C28.65 32 0 60.65 0 96v320c0 35.35 28.65 64 64 64h448c35.35 0 64-28.65 64-64V96c0-35.35-28.7-64-64-64zm-336 96c35.35 0 64 28.65 64 64s-28.65 64-64 64-64-28.65-64-64 28.7-64 64-64zm96 256H80c-8.84 0-16-7.2-16-16 0-44.2 35.82-80 80-80h64c44.18 0 80 35.82 80 80 0 8.8-7.2 16-16 16zm224-64H368c-8.8 0-16-7.2-16-16s7.2-16 16-16h128c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0-64H368c-8.8 0-16-7.2-16-16s7.2-16 16-16h128c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0-64H368c-8.8 0-16-7.2-16-16s7.2-16 16-16h128c8.8 0 16 7.2 16 16s-7.2 16-16 16z\" />\r\n  </svg>\r\n);\r\n\r\nexport default AddressCardIcon;","import * as React from \"react\";\r\n\r\n// FROM: https://fontawesome.com/icons/wallet?s=solid\r\n// Converted with: https://react-svgr.com/playground/\r\nconst WalletIcon = (props) => (\r\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" {...props}>\r\n    <path fill={props.color || 'black'} d=\"M448 32c17.7 0 32 14.33 32 32s-14.3 32-32 32H80c-8.84 0-16 7.2-16 16s7.16 16 16 16h368c35.3 0 64 28.7 64 64v224c0 35.3-28.7 64-64 64H64c-35.35 0-64-28.7-64-64V96c0-35.35 28.65-64 64-64h384zm-32 304c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32z\" />\r\n  </svg>\r\n);\r\n\r\nexport default WalletIcon;","import { useContext, useState  } from 'react';\r\n\r\nimport MintForm from './MintNFT/MintForm';\r\nimport NFTCollection from './NFTCollection/NFTCollection';\r\nimport CollectionContext from '../../store/collection-context';\r\nimport MarketplaceContext from '../../store/marketplace-context';\r\nimport Spinner from '../Layout/Spinner';\r\nimport logo from '../../img/malanftdriners.png';\r\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\r\nimport Button from 'react-bootstrap/Button';\r\nimport MoneyCheckDollarIcon from '../icons/MoneyCheckDollarIcon'\r\nimport AddressCardIcon from '../icons/AddressCardIcon'\r\nimport WalletIcon from '../icons/WalletIcon'\r\n\r\nconst filterOptions = [\r\n  { type: 'ALL', label: 'Todos', Icon: ({color}) => <AddressCardIcon width={24} color={color} /> },\r\n  { type: 'FOR_SALE', label: 'A la venta', Icon: ({color}) => <MoneyCheckDollarIcon width={24} color={color} /> },\r\n  { type: 'MY_NFTS', label: 'Mis NFTs', Icon: ({color}) => <WalletIcon width={20} color={color} /> }\r\n];\r\n\r\nconst Main = () => {\r\n  const collectionCtx = useContext(CollectionContext);\r\n  const marketplaceCtx = useContext(MarketplaceContext);\r\n  const collectionLoaded = collectionCtx.collection.length >= parseInt(collectionCtx.totalSupply);\r\n  const [selectedFilter, setSelectedFilter] = useState('ALL');\r\n  const handleFilterChange = (event) => setSelectedFilter(event.target.value); \r\n\r\n  return(\r\n    <div className=\"container-fluid mt-2\">\r\n      <div className=\"row\">\r\n        <main role=\"main\" className=\"col-lg-12 justify-content-center text-center\">\r\n          <div className=\"content mr-auto ml-auto\">\r\n            <img src={logo} alt=\"logo\" width=\"50%\" className=\"mb-2\"/>\r\n            {!collectionCtx.nftIsLoading && <MintForm />}\r\n            {collectionCtx.nftIsLoading && <Spinner />}\r\n          </div>\r\n        </main>\r\n      </div>\r\n      <hr/>\r\n      <div className=\"d-flex align-items-center justify-content-center m-3\">\r\n        <h2 className=\"divider\"><b>Marketplace</b></h2>\r\n      </div>\r\n      <div className=\"d-flex align-items-center justify-content-center m-2\">\r\n        <ButtonGroup onClick={handleFilterChange}>\r\n          {\r\n            filterOptions.map((filter, idx) => \r\n              <Button \r\n                key={'filter_' + idx}\r\n                value={filter.type}\r\n                variant={filter.type === selectedFilter ? 'light' : 'secondary'}\r\n              >                \r\n                <filter.Icon color={filter.type === selectedFilter ? 'black' : 'white'} /> {' '} \r\n                {filter.label}\r\n              </Button>\r\n            )\r\n          }            \r\n        </ButtonGroup>          \r\n      </div>\r\n      {!collectionLoaded && \r\n        <div className=\"d-flex align-items-center justify-content-center m-2\">\r\n          <div className=\"spinner-border mr-5 pr-5\" role=\"status\" aria-hidden=\"true\"></div>\r\n          <strong>&nbsp;Buscando en el mercado de NFTs...{collectionCtx.collection.length}/{collectionCtx.totalSupply}</strong>\r\n        </div>\r\n      }\r\n      {!marketplaceCtx.mktIsLoading && <NFTCollection showImages={collectionLoaded} filterType={selectedFilter} />}\r\n      {marketplaceCtx.mktIsLoading && <Spinner />}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Main;","import React, { useContext, useEffect, useState } from 'react';\r\nimport web3 from './connection/web3';\r\nimport Navbar from './components/Layout/Navbar';\r\nimport Main from './components/Content/Main';\r\nimport Web3Context from './store/web3-context';\r\nimport CollectionContext from './store/collection-context';\r\nimport MarketplaceContext from './store/marketplace-context'\r\nimport NFTCollection from './abis/BNBCollection.json';\r\nimport NFTMarketplace from './abis/NFTMarketplace.json';\r\nimport './app.css';\r\nconst App = () => {\r\n  const web3Ctx = useContext(Web3Context);\r\n  const collectionCtx = useContext(CollectionContext);\r\n  const marketplaceCtx = useContext(MarketplaceContext);\r\n  const [showInstallNetwork, setshowInstallNetwork] = useState(false);\r\n  useEffect(() => {\r\n    // Check if the user has Metamask active\r\n    if(!web3) {\r\n      window.alert('No tiene instalada una billetera Metamask. Viaje a la tienda de chrome para instalarsela');\r\n      return;\r\n    }    \r\n    // Function to fetch all the blockchain data\r\n    const loadBlockchainData = async() => {\r\n      // Request accounts acccess if needed\r\n      try {\r\n        await window.ethereum.request({ method: 'eth_requestAccounts' });  \r\n      } catch(error) {\r\n        console.error(error);\r\n      }\r\n      \r\n      // Load account\r\n      const account = await web3Ctx.loadAccount(web3);\r\n\r\n      // Load Network ID\r\n      const networkId = await web3Ctx.loadNetworkId(web3);\r\n\r\n      // Load Contracts      \r\n      const nftDeployedNetwork = NFTCollection.networks[networkId];\r\n      const nftContract = collectionCtx.loadContract(web3, NFTCollection, nftDeployedNetwork);\r\n\r\n      const mktDeployedNetwork = NFTMarketplace.networks[networkId];\r\n      const mktContract = marketplaceCtx.loadContract(web3, NFTMarketplace, mktDeployedNetwork);\r\n\r\n      if(nftContract) {        \r\n        // Load total Supply\r\n        const totalSupply = await collectionCtx.loadTotalSupply(nftContract);\r\n        \r\n        // Load Collection\r\n        collectionCtx.loadCollection(nftContract, totalSupply);       \r\n\r\n        // TODO: revisar porque las subscripciones a eventos no se lanzan...de momento lo tratamos directamente en el callback del send de la transacción\r\n        // Event subscription\r\n        nftContract.events.Transfer()\r\n        .on('data', (event) => {\r\n          collectionCtx.updateCollection(nftContract, event.returnValues.tokenId, event.returnValues.to);\r\n          collectionCtx.setNftIsLoading(false);\r\n        })\r\n        .on('error', (error) => {\r\n          console.log(error);\r\n        });\r\n        \r\n      } else {\r\n        setshowInstallNetwork(true);\r\n        window.alert('Tiene que estar en la red de pruebas de Binance Smart Chain.')\r\n      }\r\n\r\n      if(mktContract) {\r\n        // Load offer count\r\n        const offerCount = await marketplaceCtx.loadOfferCount(mktContract);\r\n        \r\n        // Load offers\r\n        marketplaceCtx.loadOffers(mktContract, offerCount); \r\n        \r\n        // Load User Funds\r\n        account && marketplaceCtx.loadUserFunds(mktContract, account);\r\n\r\n        // TODO: revisar porque las subscripciones a eventos no se lanzan...de momento lo tratamos directamente en el callback del send de la transacción\r\n        // Event OfferFilled subscription \r\n        mktContract.events.OfferFilled()\r\n        .on('data', (event) => {\r\n          marketplaceCtx.updateOffer(event.returnValues.offerId);\r\n          collectionCtx.updateOwner(event.returnValues.id, event.returnValues.newOwner);\r\n          marketplaceCtx.setMktIsLoading(false);\r\n        })\r\n        .on('error', (error) => {\r\n          console.log(error);\r\n        });\r\n\r\n        // Event Offer subscription \r\n        mktContract.events.Offer()\r\n        .on('data', (event) => {\r\n          marketplaceCtx.addOffer(event.returnValues);\r\n          marketplaceCtx.setMktIsLoading(false);\r\n        })\r\n        .on('error', (error) => {\r\n          console.log(error);\r\n        });\r\n\r\n        // Event offerCancelled subscription \r\n        mktContract.events.OfferCancelled()\r\n        .on('data', (event) => {\r\n          marketplaceCtx.updateOffer(event.returnValues.offerId);\r\n          collectionCtx.updateOwner(event.returnValues.id, event.returnValues.owner);\r\n          marketplaceCtx.setMktIsLoading(false);\r\n        })\r\n        .on('error', (error) => {\r\n          console.log(error);\r\n        });\r\n        \r\n      } else {\r\n\r\n        window.alert('A continuación podrá cambiar a la red de pruebas de Binance, o si usted me da permiso, se la instalaré apretando al botón');\r\n        \r\n      }\r\n\r\n      collectionCtx.setNftIsLoading(false);\r\n      marketplaceCtx.setMktIsLoading(false);\r\n\r\n      // Metamask Event Subscription - Account changed\r\n      window.ethereum.on('accountsChanged', (accounts) => {\r\n        web3Ctx.loadAccount(web3);\r\n        accounts[0] && marketplaceCtx.loadUserFunds(mktContract, accounts[0]);\r\n      });\r\n\r\n      // Metamask Event Subscription - Network changed\r\n      window.ethereum.on('chainChanged', (chainId) => {\r\n        window.location.reload();\r\n      });\r\n    };\r\n    \r\n    loadBlockchainData();\r\n  }, []);\r\n\r\n      // Function for change or installing network\r\n      const changeOrInstalingNetwork = async() =>{\r\n\r\n        let networkData = [{\r\n                chainId: \"0x61\",\r\n                chainName: \"BSCTESTNET\",\r\n                rpcUrls: [\"https://data-seed-prebsc-1-s1.binance.org:8545/\"],\r\n                nativeCurrency: {\r\n                  name: \"BINANCE COIN\",\r\n                  symbol: \"TBNB\",\r\n                  decimals: 18,\r\n                },\r\n                blockExplorerUrls: [\"https://testnet.bscscan.com/\"],\r\n              },\r\n            ];\r\n    \r\n          // agregar red o cambiar red\r\n          return window.ethereum.request({\r\n            method: \"wallet_addEthereumChain\",\r\n            params: networkData,\r\n          });\r\n      }\r\n\r\n  const showNavbar = web3 && collectionCtx.contract && marketplaceCtx.contract;\r\n  const showContent = web3 && collectionCtx.contract && marketplaceCtx.contract && web3Ctx.account;\r\n\r\n  return(\r\n\r\n    <React.Fragment>\r\n       {showInstallNetwork && <div className=\"networkDiv\">\r\n                                <button \r\n                                  onClick={changeOrInstalingNetwork}\r\n                                  className=\"btn-network btn-network-primary btn-network-ghost btn-network-shine\">\r\n                                  INSTALAR O CAMBIAR A BSC TESTNET \r\n                                </button> \r\n                              </div>}\r\n      {showNavbar && <Navbar />}\r\n      {showContent && <Main />}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default App;","import ReactDOM from 'react-dom';\r\nimport 'bootswatch/dist/vapor/bootstrap.min.css';\r\n\r\nimport Web3Provider from './store/Web3Provider';\r\nimport CollectionProvider from './store/CollectionProvider';\r\nimport MarketplaceProvider from './store/MarketplaceProvider';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <Web3Provider>\r\n    <CollectionProvider>\r\n      <MarketplaceProvider>\r\n        <App />\r\n      </MarketplaceProvider>\r\n    </CollectionProvider>\r\n  </Web3Provider>, \r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}